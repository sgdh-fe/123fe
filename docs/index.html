<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-192x192.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">






  <meta name="keywords" content="sgdh sogou fe">










<meta name="description" content="ğŸ³ğŸ³ æœç‹—å¯¼èˆªå‰ç«¯å¼€å‘ç»„ ğŸ¬ğŸ¬">
<meta property="og:type" content="website">
<meta property="og:title" content="Sogou.dh.fe">
<meta property="og:url" content="http://123fe.com/index.html">
<meta property="og:site_name" content="Sogou.dh.fe">
<meta property="og:description" content="ğŸ³ğŸ³ æœç‹—å¯¼èˆªå‰ç«¯å¼€å‘ç»„ ğŸ¬ğŸ¬">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sogou.dh.fe">
<meta name="twitter:description" content="ğŸ³ğŸ³ æœç‹—å¯¼èˆªå‰ç«¯å¼€å‘ç»„ ğŸ¬ğŸ¬">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://123fe.com/">





  <title>Sogou.dh.fe</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sogou.dh.fe</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">fe blogs</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-github">
          <a href="https://github.com/sgdh-fe" rel="section">
            
            Github
          </a>
        </li>
      
        
        <li class="menu-item menu-item-projects">
          <a href="http://git.dh.sogou-inc.com/groups/fe" rel="section">
            
            Projects
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
            About
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://123fe.com/2019/07/08/ä»é›¶å®ç°reduxåŸºæœ¬åŠŸèƒ½/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sgdhfe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/logo.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sogou.dh.fe">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/08/ä»é›¶å®ç°reduxåŸºæœ¬åŠŸèƒ½/" itemprop="url">ä»é›¶å®ç°reduxåŸºæœ¬åŠŸèƒ½</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-07-08T11:19:41+08:00">
                2019-07-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          
          <span> ï½œ </span><span class="fa fa-user-o"> </span><span style="color:#222;"> å­™æ–¹æ–Œ</span>
          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ä»é›¶å®ç°-redux"><a href="#ä»é›¶å®ç°-redux" class="headerlink" title="ä»é›¶å®ç° redux"></a>ä»é›¶å®ç° redux</h1><h3 id="çŠ¶æ€ç®¡ç†"><a href="#çŠ¶æ€ç®¡ç†" class="headerlink" title="çŠ¶æ€ç®¡ç†"></a>çŠ¶æ€ç®¡ç†</h3><h5 id="æ— è®¡åˆ’çš„çŠ¶æ€ç®¡ç†"><a href="#æ— è®¡åˆ’çš„çŠ¶æ€ç®¡ç†" class="headerlink" title="æ— è®¡åˆ’çš„çŠ¶æ€ç®¡ç†"></a>æ— è®¡åˆ’çš„çŠ¶æ€ç®¡ç†</h5><p>redux æœ¬èº«æ˜¯ä¸€ä¸ªçŠ¶æ€ç®¡ç†å™¨ï¼Œå¯ä»¥å¯¹æ•°æ®çŠ¶æ€è¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼Œä¾‹å¦‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// count çŠ¶æ€</span></span><br><span class="line"><span class="keyword">let</span> state = &#123; <span class="attr">count</span>: <span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰“å°çŠ¶æ€</span></span><br><span class="line"><span class="built_in">console</span>.log(state.count);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¿®æ”¹çŠ¶æ€</span></span><br><span class="line">state.count = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå³ä¸ºæœ€ç®€å•çš„çŠ¶æ€ä¿å­˜å’Œä¿®æ”¹ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå³ä¸èƒ½åœ¨ count æ›´æ”¹åé€šçŸ¥ä½¿ç”¨ count çš„åœ°æ–¹ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨è®¢é˜…/å‘å¸ƒè€…æ¨¡å¼å®ç°ä¸€ä¸‹:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">createStore(initState) &#123;</span><br><span class="line">    <span class="keyword">let</span> state = initState;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> listeners = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¢é˜…</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">subscribe</span> (<span class="params">listener</span>) </span>&#123;</span><br><span class="line">        listeners.push(listener);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¿®æ”¹</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">changeState</span> (<span class="params">newState</span>) </span>&#123;</span><br><span class="line">        state = newState;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; listeners.length; i++) &#123;</span><br><span class="line">            listeners[i]();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getState</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        subscribe,</span><br><span class="line">        changeState,</span><br><span class="line">        getState</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªç®€å•çš„çŠ¶æ€ç®¡ç†å™¨ï¼Œä¸»è¦å¯¼å‡º subscribeï¼ˆè®¢é˜…ï¼‰/changeStateï¼ˆä¿®æ”¹ï¼‰/getStateï¼ˆè·å–ï¼‰ä¸‰ä¸ªæ¥å£ã€‚ä¸‹é¢å¯ä»¥ä½¿ç”¨ä¾‹å­æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> createStore <span class="keyword">from</span> <span class="string">"./redux/index"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> initState = &#123;</span><br><span class="line">  counter: &#123;</span><br><span class="line">    count: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  info: &#123;</span><br><span class="line">    name: <span class="string">"first"</span>,</span><br><span class="line">    description: <span class="string">"hhh"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> store = createStore(initState);</span><br><span class="line"></span><br><span class="line">store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> state = store.getState();</span><br><span class="line">  <span class="built_in">console</span>.log(state.counter.count);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> state = store.getState();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;state.info.name&#125;</span>:<span class="subst">$&#123;state.info.description&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">store.changeState(&#123;</span><br><span class="line">  ...store.getState(),</span><br><span class="line">  counter: &#123;</span><br><span class="line">    count: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// first:hhh</span></span><br><span class="line"></span><br><span class="line">store.changeState(&#123;</span><br><span class="line">  ...store.getState(),</span><br><span class="line">  info: &#123;</span><br><span class="line">    name: <span class="string">"222"</span>,</span><br><span class="line">    description: <span class="string">"lalala"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 222:lalala</span></span><br></pre></td></tr></table></figure>
<p><strong><em>ä»£ç è§ demo1</em></strong></p>
<h5 id="æœ‰è®¡åˆ’çš„çŠ¶æ€ç®¡ç†"><a href="#æœ‰è®¡åˆ’çš„çŠ¶æ€ç®¡ç†" class="headerlink" title="æœ‰è®¡åˆ’çš„çŠ¶æ€ç®¡ç†"></a>æœ‰è®¡åˆ’çš„çŠ¶æ€ç®¡ç†</h5><p>ä¸Šé¢çš„ä»£ç å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œä¾‹å¦‚:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">store.changeState(&#123;</span><br><span class="line">  ...store.getState(),</span><br><span class="line">  counter: &#123;</span><br><span class="line">    key: <span class="number">111</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¼šå‘ç° counter çš„ç»“æ„ç›´æ¥è¢«æ”¹å˜äº†ï¼ŒçŠ¶æ€çš„ä¿®æ”¹æ²¡æœ‰ä»»ä½•çº¦æŸã€‚<br>è¿™é‡Œæˆ‘ä»¬åªæƒ³è¦ count æœ‰è‡ªå¢æˆ–è€…è‡ªå‡ä¸¤ç§çŠ¶æ€æ”¹å˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åªæš´éœ²è‡ªå¢å’Œè‡ªå‡ä¸¤ç§æ–¹æ³•ï¼Œæ•´ä¸ªå®ç°åˆ†ä¸ºä¸¤æ­¥ï¼š</p>
<ol>
<li>åˆ¶å®šä¸€ä¸ª plan æ¥ä¿®æ”¹ count çš„çŠ¶æ€ï¼Œé‡Œé¢åŒ…å«è‡ªå¢å’Œè‡ªå‡ä¸¤ä¸ªæ–¹æ³•ã€‚</li>
<li>ä¿®æ”¹ changeState æ–¹æ³•ï¼Œåœ¨æ‰§è¡Œæ—¶æŒ‰ç…§ plan çš„æ–¹æ³•æ‰§è¡Œã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ¶å®šplan</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">plan</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"INCREMENT"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        count: state.count + <span class="number">1</span></span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"DECREMENT"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        count: state.count - <span class="number">1</span></span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸ºcreateStoreå‡½æ•°æ·»åŠ planå‚æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStore</span>(<span class="params">plan, initState</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> state = initState;</span><br><span class="line">  <span class="keyword">let</span> listeners = [];</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">listener</span>) </span>&#123;</span><br><span class="line">    listeners.push(listener);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeState</span>(<span class="params">action</span>) </span>&#123;</span><br><span class="line">    state = plan(state, action);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; listeners.length; i++) &#123;</span><br><span class="line">      listeners[i]();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getState</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    subscribe,</span><br><span class="line">    changeState,</span><br><span class="line">    getState</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æ¥æµ‹è¯•ä¸€ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> initState = &#123;</span><br><span class="line">  count: <span class="number">0</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> store = createStore(plan, initState);</span><br><span class="line"></span><br><span class="line">store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> state = store.getState();</span><br><span class="line">  <span class="built_in">console</span>.log(state.count);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">store.changeState(&#123;</span><br><span class="line">  type: <span class="string">"DECREMENT"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">store.changeState(&#123;</span><br><span class="line">  type: <span class="string">"INCREMENT"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">store.changeState(&#123;</span><br><span class="line">  count: <span class="string">"sss"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//-1</span></span><br><span class="line"><span class="comment">//0</span></span><br><span class="line"><span class="comment">//0</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬è§„å®šäº†æ•°æ®çš„æ”¹å˜æ–¹å¼ï¼Œåªåœ¨æˆ‘ä»¬å…è®¸çš„ action.type ä¸­æ”¹å˜æ•°æ®çŠ¶æ€ã€‚åœ¨ redux ä¸­ï¼Œreducer å°±ç›¸å½“äºç°åœ¨çš„ planï¼Œdispatch ç›¸å½“äºç°åœ¨çš„ changeStateã€‚<br><strong><em>ä»£ç è§ demo2</em></strong></p>
<h3 id="æ‹†åˆ†-reducer"><a href="#æ‹†åˆ†-reducer" class="headerlink" title="æ‹†åˆ† reducer"></a>æ‹†åˆ† reducer</h3><p>åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼ŒåŠ¿å¿…ä¼šæœ‰è®¸å¤šä¸åŒç»„ä»¶ state çš„ reducer,åƒä¹‹å‰çš„å†™æ³•åŠ¿å¿…ä¼šè®©ä¸€ä¸ª reducer æ–‡ä»¶è¿‡äºåºå¤§è€Œä¸”éš¾ä»¥ç»´æŠ¤ï¼Œé‚£ä¹ˆè¿™é‡Œå¯ä»¥å°†ä¸åŒç»„ä»¶ state çš„ reducer æ‹†åˆ†æˆå•ä¸ªæ–‡ä»¶ï¼Œæœ€åå†ç»„åˆèµ·æ¥ã€‚ä¾‹å¦‚å¯¹äºä»¥ä¸‹çŠ¶æ€</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> initState = &#123;</span><br><span class="line">  counter: &#123;</span><br><span class="line">    count: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  info: &#123;</span><br><span class="line">    name: <span class="string">"å°æ˜"</span>,</span><br><span class="line">    description: <span class="string">"çˆ±ä¸Šäº†é˜¿èŠ¬"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥æ‹†åˆ†ä¸º counterReducer å’Œ infoReducer</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">counterReducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"INCREMENT"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        count: state.count + <span class="number">1</span></span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"DECREMENT"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        count: state.count - <span class="number">1</span></span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">infoReducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"setName"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        name: action.name</span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"setDescription"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        description: action.description</span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥å°±æ˜¯åˆ›å»ºä¸€ä¸ªæ–¹æ³•å°†ä¸¤ä¸ª reducer åˆå¹¶èµ·æ¥ï¼Œæˆ‘ä»¬æƒ³è¦çš„æ˜¯å¦‚ä¸‹çš„æ‰§è¡Œæ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reducer = combineReducer(&#123;</span><br><span class="line">  counter: counterReducer,</span><br><span class="line">  info: infoReducer</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ ¹æ®ä¼ å…¥å¯¹è±¡çš„ key-value æ¥è¿”å›ä¸€ä¸ª functionï¼Œè¿™ä¸ª function éœ€è¦å¯¹æ‰€æœ‰çš„ reducer æ‰§è¡Œå¹¶è¿”å›ç»“åˆåçš„çŠ¶æ€ï¼ˆè¿”å›äº†æ•´ä¸ªçŠ¶æ€æ ‘ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">combineReducers</span>(<span class="params">reducers</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> keys = <span class="built_in">Object</span>.keys(reducers);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">combination</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> nextState = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> key = keys[i];</span><br><span class="line">      <span class="keyword">let</span> reducer = reducers[key];</span><br><span class="line">      <span class="keyword">let</span> preState = state[key];</span><br><span class="line">      <span class="comment">//æ‰§è¡Œç›¸åº”çš„reducerè·å–å½“å‰keyä¸‹ä¸ªçŠ¶æ€çš„æ•°æ®</span></span><br><span class="line">      nextState[key] = reducer(preState, action);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æœ€åå°†æ‰€æœ‰keysçš„çŠ¶æ€æ›´æ–°</span></span><br><span class="line">    <span class="keyword">return</span> nextState;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥å¯ä»¥çœ‹ä¸‹å®é™…çš„ä½¿ç”¨ä¾‹å­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, combineReducers &#125; <span class="keyword">from</span> <span class="string">"./redux"</span>;</span><br><span class="line"><span class="keyword">import</span> counterReducer <span class="keyword">from</span> <span class="string">"./reducer/counterReducer"</span>;</span><br><span class="line"><span class="keyword">import</span> infoReducer <span class="keyword">from</span> <span class="string">"./reducer/infoReducer"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> initState = &#123;</span><br><span class="line">  counter: &#123;</span><br><span class="line">    count: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  info: &#123;</span><br><span class="line">    name: <span class="string">"å°æ˜"</span>,</span><br><span class="line">    description: <span class="string">"çˆ±ä¸Šäº†é˜¿èŠ¬"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> reducer = combineReducers(&#123;</span><br><span class="line">  counter: counterReducer,</span><br><span class="line">  info: infoReducer</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> store = createStore(reducer, initState);</span><br><span class="line"></span><br><span class="line">store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> state = store.getState();</span><br><span class="line">  <span class="built_in">console</span>.log(state.counter.count);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> state = store.getState();</span><br><span class="line">  <span class="built_in">console</span>.log(state.info.name + state.info.description);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">store.dispatch(&#123;</span><br><span class="line">  type: <span class="string">"DECREMENT"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">store.dispatch(&#123;</span><br><span class="line">  type: <span class="string">"setName"</span>,</span><br><span class="line">  name: <span class="string">"é˜¿èŠ¬"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">store.dispatch(&#123;</span><br><span class="line">  type: <span class="string">"setDescription"</span>,</span><br><span class="line">  description: <span class="string">"ä¸çˆ±å°æ˜"</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//0</span></span><br><span class="line"><span class="comment">//å°æ˜çˆ±ä¸Šäº†é˜¿èŠ¬</span></span><br><span class="line"><span class="comment">//0</span></span><br><span class="line"><span class="comment">//é˜¿èŠ¬çˆ±ä¸Šäº†é˜¿èŠ¬</span></span><br><span class="line"><span class="comment">//0</span></span><br></pre></td></tr></table></figure>
<p><strong><em>ä»£ç è§ demo3</em></strong></p>
<h3 id="æ‹†åˆ†ä¸åŒç»„ä»¶çš„-state"><a href="#æ‹†åˆ†ä¸åŒç»„ä»¶çš„-state" class="headerlink" title="æ‹†åˆ†ä¸åŒç»„ä»¶çš„ state"></a>æ‹†åˆ†ä¸åŒç»„ä»¶çš„ state</h3><p>ä¸Šé¢æˆ‘ä»¬æ‹†åˆ†äº† reducerï¼ŒåŒæ ·çš„ï¼Œå®é™…ä¸šåŠ¡ä¸­å°†æ•´ä¸ª store å®šä¹‰åœ¨ä¸€èµ·ä¹Ÿä¼šå‡ºç°å•ä¸ªå¯¹è±¡ç»“æ„è¿‡äºå¤æ‚çš„é—®é¢˜ï¼Œé‚£ä¹ˆè¿™é‡Œæˆ‘ä»¬å°† state æ‹†åˆ†åˆ°å„è‡ªçš„ reducer ä¸­ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// infoReducer.js</span></span><br><span class="line"><span class="keyword">let</span> initState = &#123;</span><br><span class="line">  name: <span class="string">'å°ç™½'</span>,</span><br><span class="line">  description: <span class="string">'çœŸé»‘å•Š'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">infoReducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//é€šè¿‡é—­åŒ…ç®¡ç†åˆå§‹èµ‹å€¼</span></span><br><span class="line">  <span class="keyword">if</span>(!state) &#123;</span><br><span class="line">    state = initState;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"setName"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        name: action.name</span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"setDescription"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        description: action.description</span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// counterReducer.js</span></span><br><span class="line"><span class="keyword">let</span> initState = &#123;</span><br><span class="line">  count: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">counterReducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//é€šè¿‡é—­åŒ…ç®¡ç†åˆå§‹èµ‹å€¼</span></span><br><span class="line">  <span class="keyword">if</span>(!state) &#123;</span><br><span class="line">    state = initState;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"INCREMENT"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        count: state.count + <span class="number">1</span></span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"DECREMENT"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        count: state.count - <span class="number">1</span></span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç›¸åº”çš„ï¼Œåœ¨æ‰§è¡Œ createStore å‡½æ•°æ—¶ï¼Œéœ€è¦å°†æ‰€æœ‰çŠ¶æ€çš„åˆå§‹å€¼æå–å‡ºæ¥ç»„åˆ stateï¼Œè€ƒè™‘åˆ°æ‰€æœ‰çš„ reducer åœ¨<code>switch</code>åˆ¤æ–­è¿›å…¥<code>default</code>æ—¶ä¼šè¿”å› state è‡ªèº«ï¼Œå¯ä»¥é€šè¿‡ dispatch ä¸€æ¬¡å”¯ä¸€çš„ type çš„ç±»å‹æ¥è·å–åˆå§‹å€¼ï¼Œè¿™é‡Œä½¿ç”¨ es6 ä¸­çš„ Symbal æ¥å½“å”¯ä¸€çš„ typeï¼Œä¿è¯æ‰€æœ‰ reducer è¿›å…¥<code>default</code>ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">createStore</span>(<span class="params">reducer, initState</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> state = initState;</span><br><span class="line">  <span class="keyword">let</span> listeners = [];</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">listener</span>) </span>&#123;</span><br><span class="line">    listeners.push(listener);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">action</span>) </span>&#123;</span><br><span class="line">    state = reducer(state, action);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; listeners.length; i++) &#123;</span><br><span class="line">      listeners[i]();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//è§¦å‘dispatchæ¥æ‰§è¡Œæ‰€æœ‰reducerçš„defaultè¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">  dispatch(&#123; <span class="attr">type</span>: <span class="built_in">Symbol</span>() &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getState</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    subscribe,</span><br><span class="line">    dispatch,</span><br><span class="line">    getState</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥æ‰§è¡Œä¸€ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, combineReducers &#125; <span class="keyword">from</span> <span class="string">"./redux"</span>;</span><br><span class="line"><span class="keyword">import</span> counterReducer <span class="keyword">from</span> <span class="string">"./reducer/counterReducer"</span>;</span><br><span class="line"><span class="keyword">import</span> infoReducer <span class="keyword">from</span> <span class="string">"./reducer/infoReducer"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> reducer = combineReducers(&#123;</span><br><span class="line">  counter: counterReducer,</span><br><span class="line">  info: infoReducer</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> store = createStore(reducer);</span><br><span class="line"></span><br><span class="line">store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> state = store.getState();</span><br><span class="line">  <span class="built_in">console</span>.log(state.counter.count);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> state = store.getState();</span><br><span class="line">  <span class="built_in">console</span>.log(state.info.name + state.info.description);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">store.dispatch(&#123;</span><br><span class="line">  type: <span class="string">"DECREMENT"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">store.dispatch(&#123;</span><br><span class="line">  type: <span class="string">"setName"</span>,</span><br><span class="line">  name: <span class="string">"é˜¿èŠ¬"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">store.dispatch(&#123;</span><br><span class="line">  type: <span class="string">"setDescription"</span>,</span><br><span class="line">  description: <span class="string">"ä¸çˆ±å°æ˜"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//0</span></span><br><span class="line"><span class="comment">//å°ç™½çœŸé»‘å•Š</span></span><br><span class="line"><span class="comment">//0</span></span><br><span class="line"><span class="comment">//é˜¿èŠ¬çœŸé»‘å•Š</span></span><br><span class="line"><span class="comment">//0</span></span><br><span class="line"><span class="comment">//é˜¿èŠ¬ä¸çˆ±å°æ˜</span></span><br></pre></td></tr></table></figure>
<p><strong><em>ä»£ç è§ demo4</em></strong></p>
<h3 id="ä¸­é—´ä»¶-middleware"><a href="#ä¸­é—´ä»¶-middleware" class="headerlink" title="ä¸­é—´ä»¶ middleware"></a>ä¸­é—´ä»¶ middleware</h3><p>ä¸­é—´ä»¶åœ¨ redux ä¸­æ˜¯ä¸€ä¸ªæ¯”è¾ƒéš¾ä»¥ç†è§£çš„æ¦‚å¿µï¼Œä¸­é—´ä»¶æ˜¯é€šè¿‡å¯¹ redux ä¸­ dispatch é‡å†™ï¼Œæ¥å®ç°å¢å¼ºå…¶åŠŸèƒ½çš„ç›®çš„ã€‚</p>
<h5 id="è®°å½•æ—¥å¿—"><a href="#è®°å½•æ—¥å¿—" class="headerlink" title="è®°å½•æ—¥å¿—"></a>è®°å½•æ—¥å¿—</h5><p>ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬ç°åœ¨éœ€è¦å¢åŠ ä¸€ä¸ªæ—¥å¿—åŠŸèƒ½ï¼Œéœ€è¦è®°å½•æ¯æ¬¡ä¿®æ”¹æ“ä½œå‰çš„æ•°æ®å’Œä¿®æ”¹åçš„æ•°æ®ï¼Œå› ä¸ºä¹‹å‰çš„æ•°æ® subscribe æ— æ³•è®°å½•ï¼Œè¿™é‡Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªç®€å•çš„ä¸­é—´ä»¶æ¥å®ç°äº†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™é‡Œåªä½¿ç”¨counterReducer</span></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer);</span><br><span class="line"><span class="keyword">const</span> next = store.dispatch;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¿®æ”¹åŸdispatch</span></span><br><span class="line">store.dispatch = <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> state = store.getState();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"pre state"</span>, state);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"action"</span>, action);</span><br><span class="line">  next(action);</span><br><span class="line">  state = store.getState();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"next state"</span>, state);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line">store.dispatch(&#123;</span><br><span class="line">  type: <span class="string">"INCREMENT"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// pre state &#123; counter: &#123; count: 0 &#125; &#125;</span></span><br><span class="line"><span class="comment">// action &#123; type: 'INCREMENT' &#125;</span></span><br><span class="line"><span class="comment">// next state &#123; counter: &#123; count: 1 &#125; &#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="è®°å½•å¼‚å¸¸"><a href="#è®°å½•å¼‚å¸¸" class="headerlink" title="è®°å½•å¼‚å¸¸"></a>è®°å½•å¼‚å¸¸</h5><p>è¿™æ˜¯æˆ‘ä»¬åˆæœ‰å¦ä¸€ä¸ªéœ€æ±‚éœ€è¦è®°å½• redux ä¿®æ”¹çŠ¶æ€æ—¶çš„å¼‚å¸¸ã€‚é‚£ä¹ˆä½¿ç”¨ä¸­é—´ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = createStore(reducer);</span><br><span class="line"><span class="keyword">const</span> next = store.dispatch;</span><br><span class="line"></span><br><span class="line">store.dispatch = <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    next(action);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·æ¯æ¬¡ä¿®æ”¹å‡ºç°å¼‚å¸¸çš„è¯å°±ä¼šæ‰“å°å‡ºæ¥ã€‚</p>
<h5 id="ä¸­é—´ä»¶çš„åˆä½œ"><a href="#ä¸­é—´ä»¶çš„åˆä½œ" class="headerlink" title="ä¸­é—´ä»¶çš„åˆä½œ"></a>ä¸­é—´ä»¶çš„åˆä½œ</h5><p>é‚£ä¹ˆåŠ å…¥æˆ‘ä»¬è¦åŒæ—¶å®ç°ä¸Šé¢ä¸¤ä¸ªéœ€æ±‚å‘¢ï¼Ÿæœ€ç®€å•çš„æ˜¯ç›´æ¥åˆå¹¶èµ·æ¥å†™è¿›åŒä¸€ä¸ªå‡½æ•°ä½“å†…ï¼Œä½†æ˜¯å¦‚æœéœ€æ±‚å˜å¤šçš„è¯ï¼Œä¸€ä¸ª<code>store.dispatch</code>ä¼šå˜å¾—éå¸¸å¤æ‚ã€‚è¿™é‡Œæˆ‘ä»¬æƒ³åŠæ³•å°†ä¸åŒåŠŸèƒ½ç‹¬ç«‹å‡ºå»ã€‚</p>
<ol>
<li>é¦–å…ˆæˆ‘ä»¬å…ˆæŠŠ loggerMiddleware æå–å‡ºæ¥ï¼š</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = createStore(reducer);</span><br><span class="line"><span class="keyword">const</span> next = store.dispatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> loggerMiddleware = <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"pre state"</span>, store.getState());</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"action"</span>, action);</span><br><span class="line">  next(action);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"next state"</span>, store.getState());</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">store.dispatch = <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    loggerMiddleware(action);</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>æŠŠ exceptMiddleware æå–å‡ºæ¥ï¼š</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> exceptMiddleware = <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    loggerMiddleware(action);</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">store.dispatch = exceptMiddleware;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒexceptMiddleware ä¸­å†™æ­»äº† loggerMiddleware ä¸­é—´ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å¯ä»¥åŠ¨æ€ä¼ å…¥ï¼Œéšä¾¿å“ªä¸ªä¸­é—´ä»¶éƒ½å¯ä»¥ï¼š</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> exceptMiddleware = <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">//loggerMiddleware(action);</span></span><br><span class="line">    next(action);</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>åŒæ ·çš„ï¼ŒloggerMiddleware ä¸­çš„ next ä¹Ÿæ’ç­‰äº<code>store.dispatch</code>ï¼Œç…§ç€ä¸Šé¢ä¹Ÿå†™æˆåŠ¨æ€çš„ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loggerMiddleware = <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"pre state"</span>, store.getState());</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"action"</span>, action);</span><br><span class="line">  next(action);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"next state"</span>, store.getState());</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†ä¸€ä¸ªæ‰©å±•æ€§å¾ˆå¼ºçš„ä¸­é—´ä»¶æ¨¡å¼ï¼Œé‚£ä¹ˆå®Œæ•´çš„å†™æ³•å°±æ˜¯</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = createStore(reducer);</span><br><span class="line"><span class="keyword">const</span> next = store.dispatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> loggerMiddleware = <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"pre state"</span>, store.getState());</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"action"</span>, action);</span><br><span class="line">  next(action);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"next state"</span>, store.getState());</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> exceptMiddleware = <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    next(action);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"é”™è¯¯æŠ¥å‘Š: "</span>, err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">store.dispatch = exceptMiddleware(loggerMiddleware(next));</span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬æ–°å»ºäº†ä¸¤ä¸ªæ–‡ä»¶<code>loggerMiddleware.js</code>å’Œ<code>exceptMiddleware.js</code>ä¸¤ä¸ªæ–‡ä»¶ï¼Œæƒ³è¦æŠŠä¸¤ä¸ªæ–¹æ³•åˆ†ç¦»åˆ°ä¸¤ä¸ªæ–‡ä»¶ä¸­æ—¶ï¼Œæ–°çš„é—®é¢˜å‡ºç°äº†ï¼Œæˆ‘ä»¬çš„ store æ˜¯å”¯ä¸€çš„ï¼Œä¸¤ä¸ªæ–¹æ³•éƒ½éœ€è¦ storeï¼Œé‚£ä¹ˆæˆ‘ä»¬å°† store ä¹Ÿåˆ†ç¦»å‡ºå»</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = createStore(reducer);</span><br><span class="line"><span class="keyword">const</span> next = store.dispatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> loggerMiddleware = <span class="function"><span class="params">store</span> =&gt;</span> <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"pre state"</span>, store.getState());</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"action"</span>, action);</span><br><span class="line">  next(action);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"next state"</span>, store.getState());</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> exceptMiddleware = <span class="function"><span class="params">store</span> =&gt;</span> <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    next(action);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> logger = loggerMiddleware(store);</span><br><span class="line"><span class="keyword">const</span> exception = exceptMiddleware(store);</span><br><span class="line">store.dispatch = exception(logger(next));</span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤æˆ‘ä»¬æˆåŠŸå®ç°äº†ä¸­é—´ä»¶ï¼Œå‡å¦‚æˆ‘ä»¬æ–°åŠ å…¥ä¸€ä¸ªåœ¨æ‰“å°æ—¥å¿—å‰è¾“å‡ºå½“å‰æ—¶é—´æˆ³çš„éœ€æ±‚å‘¢</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> timeMiddleware = <span class="function"><span class="params">store</span> =&gt;</span> <span class="function"><span class="params">next</span> =&gt;</span> <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"time"</span>, <span class="keyword">new</span> <span class="built_in">Date</span>().getTime());</span><br><span class="line">  next(action);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> time = timeMiddleware(store);</span><br><span class="line">store.dispatch = exception(time(logger(next)));</span><br></pre></td></tr></table></figure>
<p><strong><em>ä»£ç è§ demo5</em></strong></p>
<h3 id="ä¼˜åŒ–ä¸­é—´ä»¶ä½¿ç”¨æ–¹æ³•"><a href="#ä¼˜åŒ–ä¸­é—´ä»¶ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä¼˜åŒ–ä¸­é—´ä»¶ä½¿ç”¨æ–¹æ³•"></a>ä¼˜åŒ–ä¸­é—´ä»¶ä½¿ç”¨æ–¹æ³•</h3><p>åœ¨ä¸Šé¢ä½¿ç”¨ä¸­é—´ä»¶æ—¶ï¼Œéœ€è¦ç”¨ store ä½œä¸ºå‚æ•°å¯¹æ¯ä¸ªä¸­é—´ä»¶æ˜¾å¼ä¼ å‚ï¼Œæœ€åè¿˜è¦å†™æˆåµŒå¥—çš„å‡½æ•°ï¼Œç”¨èµ·æ¥å¤ªè¿‡ç¹çã€ä¸ç›´è§‚ã€‚æˆ‘ä»¬æœŸæœ›çš„åº”è¯¥æ˜¯ç›´æ¥å°†ä¸­é—´ä»¶æŒ‰é¡ºåºä¼ å…¥æŸä¸ªå‡½æ•°åè‡ªåŠ¨ç”Ÿæˆï¼Œå› ä¸ºæœ€ç»ˆä¿®æ”¹çš„æ˜¯<code>dispatch</code>ï¼Œé‚£æˆ‘ä»¬ç›´æ¥ä¿®æ”¹ createStore å‡½æ•°æ¥å®ç°ã€‚ä¸‹é¢æ˜¯æœŸæœ›çš„ä½¿ç”¨å½¢å¼ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¥æ”¶æ—§çš„ createStoreï¼Œè¿”å›æ–°çš„ createStore</span></span><br><span class="line"><span class="keyword">const</span> newCreateStore = applyMiddleware(</span><br><span class="line">  exceptMiddleware,</span><br><span class="line">  timeMiddleware,</span><br><span class="line">  loggerMiddleware</span><br><span class="line">)(createStore);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›äº†ä¸€ä¸ª dispatch è¢«é‡å†™è¿‡çš„ store</span></span><br><span class="line"><span class="keyword">const</span> store = newCreateStore(reducer);</span><br></pre></td></tr></table></figure>
<p>å…·ä½“å®ç°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">applyMiddleware</span>(<span class="params">...middlewares</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">rewriteCreateStore</span>(<span class="params">oldCreateStore</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">newCreateStore</span>(<span class="params">reducer, initstate</span>) </span>&#123;</span><br><span class="line">      <span class="comment">//å…ˆå®ä¾‹æ—§çš„store</span></span><br><span class="line">      <span class="keyword">let</span> store = oldCreateStore(reducer, initstate);</span><br><span class="line">      <span class="comment">//ç»™æ‰€æœ‰ä¸­é—´ä»¶ä¼ å…¥store</span></span><br><span class="line">      <span class="keyword">let</span> chain = middlewares.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> item(store);</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">//ç»„åˆä¸­é—´ä»¶</span></span><br><span class="line">      <span class="keyword">let</span> dispatch = store.dispatch;</span><br><span class="line">      chain.reverse().map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        dispatch = item(dispatch);</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">//é‡å†™store.dispatchå¹¶è¿”å›æ–°çš„store</span></span><br><span class="line">      store.dispatch = dispatch;</span><br><span class="line">      <span class="keyword">return</span> store;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ª createStoreï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ²¡æœ‰ä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer);</span><br><span class="line"><span class="comment">//æœ‰ä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">const</span> newCreateStore = applyMiddleware(</span><br><span class="line">  exceptMiddleware,</span><br><span class="line">  timeMiddleware,</span><br><span class="line">  loggerMiddleware</span><br><span class="line">)(createStore);</span><br><span class="line"><span class="keyword">const</span> store = newCreateStore(reducer);</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥ç»Ÿä¸€å†™è¿› createStore å‡½æ•°ä¸­ï¼Œé€šè¿‡é€‰å¡«çš„å‚æ•°è¿›è¡Œåˆ¤æ–­ç”Ÿæˆ store</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStore</span> (<span class="params">reducer, initState, rewriteCreateStoreFunc</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//æ·»åŠ åˆ¤æ–­</span></span><br><span class="line">  <span class="keyword">if</span>(rewriteCreateStoreFunc) &#123;</span><br><span class="line">    <span class="keyword">const</span> newCreateStore = rewriteCreateStoreFunc(createStore);</span><br><span class="line">    <span class="keyword">return</span> newCreateStore(reducer,initState);</span><br><span class="line">  &#125;</span><br><span class="line">  Â·Â·Â·</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆç”¨æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rewriteCreateStoreFunc = applyMiddleware(</span><br><span class="line">  exceptMiddleware,</span><br><span class="line">  timeMiddleware,</span><br><span class="line">  loggerMiddleware</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer, initState, rewriteCreateStoreFunc);</span><br></pre></td></tr></table></figure>
<p><strong><em>ä»£ç è§ demo6</em></strong></p>
<h3 id="å®Œå–„-redux"><a href="#å®Œå–„-redux" class="headerlink" title="å®Œå–„ redux"></a>å®Œå–„ redux</h3><ol>
<li>æ·»åŠ äº‹ä»¶è§£ç»‘,ä¿®æ”¹<code>store.subscribe</code>æ–¹æ³•ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœæŸä¸ªè®¢é˜…è€…åœ¨è¿è¡Œæ—¶ä¼šè§£ç»‘äº‹ä»¶ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´è®¢é˜…å‡ºé”™ï¼Œå»ºè®®å°†listenersæ‹·è´ä¸€ä»½æ¥æ‰§è¡Œï¼Œä¿è¯dispatchæ—¶é˜Ÿåˆ—çš„ä¸å˜ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">listener</span>) </span>&#123;</span><br><span class="line">  listeners.push(listener);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">unsubscribe</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> index = listeners.indexOf(listener);</span><br><span class="line">    listeners.splice(index);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">action</span>) </span>&#123;</span><br><span class="line">  state = reducer(state, action);</span><br><span class="line">  <span class="keyword">let</span> copy = listeners.slice();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; copy.length; i++) &#123;</span><br><span class="line">    copy[i]();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unsub = store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">unsub();</span><br></pre></td></tr></table></figure>
<p>2.æ§åˆ¶ä¸­é—´ä»¶æƒé™ï¼Œç°åœ¨çš„ä¸­é—´ä»¶æ‹¿åˆ°çš„æ˜¯å®Œæ•´çš„ storeï¼Œä¸­é—´ä»¶ç”šè‡³å¯ä»¥ä¿®æ”¹ store ä¸Šçš„æ–¹æ³•ï¼ŒæŒ‰ç…§æœ€å°æƒé™çš„åŸåˆ™ï¼Œæˆ‘ä»¬åªéœ€è¦ä¼ <code>store.getState</code>æ–¹æ³•å³å¯ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> chain = middlewares.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//return item(store);</span></span><br><span class="line">  <span class="keyword">return</span> item(&#123; <span class="attr">getState</span>: store.getState &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>çœç•¥initState<br>æœ‰æ—¶å€™åˆ›å»ºstoreæ—¶æˆ‘ä»¬ä¸ä¼ å…¥initStateï¼Œæ­¤æ—¶æˆ‘ä»¬çš„å†™æ³•ä¸º<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = createStore(reducer, &#123;&#125;, rewriteCreateStoreFunc);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>reduxå…è®¸è¿™ä¹ˆå†™<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = createStore(reducer,  rewriteCreateStoreFunc);</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œåªéœ€è¦åˆ¤æ–­ä¸‹ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦ä¸ºå¯¹è±¡å†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">craeteStore</span>(<span class="params">reducer, initState, rewriteCreateStoreFunc</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> initState === <span class="string">'function'</span>)&#123;</span><br><span class="line">    rewriteCreateStoreFunc = initState;</span><br><span class="line">    initState = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol start="4">
<li>bindActionCreators<br>è¿™ä¸ªåŠŸèƒ½ä¸€èˆ¬å‡ºç°åœ¨react-reduxä¸­ï¼Œé€šè¿‡é—­åŒ…éšè—dispatchå’ŒactionCreator,åªæš´éœ²actionæ¥è¿›è¡ŒçŠ¶æ€æ“ä½œã€‚<br>è¿™é‡Œæˆ‘ä»¬å…ˆè‡ªå·±å®ç°ä¸€ä¸‹éšè—dispatchå’ŒactionCreator<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reducer = combineReducers(&#123;</span><br><span class="line">  counter: counterReducer,</span><br><span class="line">  info: infoReducer</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*è¿”å› action çš„å‡½æ•°å°±å« actionCreator*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">increment</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: <span class="string">'INCREMENT'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: <span class="string">'SET_NAME'</span>,</span><br><span class="line">    name: name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  increment: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> store.dispatch(increment.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>))</span><br><span class="line">  &#125;,</span><br><span class="line">  setName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> store.dispatch(setName.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*æ³¨æ„ï¼šæˆ‘ä»¬å¯ä»¥æŠŠ actions ä¼ åˆ°ä»»ä½•åœ°æ–¹å»*/</span></span><br><span class="line"><span class="comment">/*å…¶ä»–åœ°æ–¹åœ¨å®ç°è‡ªå¢çš„æ—¶å€™ï¼Œæ ¹æœ¬ä¸çŸ¥é“ dispatchï¼ŒactionCreatorç­‰ç»†èŠ‚*/</span></span><br><span class="line">actions.increment(); <span class="comment">/*è‡ªå¢*/</span></span><br><span class="line">actions.setName(<span class="string">'ä¹éƒ¨å¨æ­¦'</span>); <span class="comment">/*ä¿®æ”¹ info.name*/</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å¯ä»¥æç‚¼ä¸€ä¸‹æ•´ä¸ªå‡½æ•°çš„ä½¿ç”¨å½¢å¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = bindActionCreators(&#123; increment, setName &#125;, store.dispatch);</span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸‹æ˜¯bindActionCreatorsçš„æºç å®ç°<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æ ¸å¿ƒçš„ä»£ç åœ¨è¿™é‡Œï¼Œé€šè¿‡é—­åŒ…éšè—äº† actionCreator å’Œ dispatch*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindActionCreator</span>(<span class="params">actionCreator, dispatch</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> dispatch(actionCreator.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* actionCreators å¿…é¡»æ˜¯ function æˆ–è€… object */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">bindActionCreators</span>(<span class="params">actionCreators, dispatch</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> actionCreators === <span class="string">'function'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> bindActionCreator(actionCreators, dispatch)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> actionCreators !== <span class="string">'object'</span> || actionCreators === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(actionCreators)</span><br><span class="line">  <span class="keyword">const</span> boundActionCreators = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> key = keys[i]</span><br><span class="line">    <span class="keyword">const</span> actionCreator = actionCreators[key]</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> actionCreator === <span class="string">'function'</span>) &#123;</span><br><span class="line">      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> boundActionCreators</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ€»ç»“ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹ä¸­ä½¿ç”¨çš„reduxä¸­çš„åè¯</p>
<ol>
<li>createStore<br>è¿”å›storeå¯¹è±¡ï¼ŒåŒ…å«dispatchï¼ŒgetStateï¼Œsubscribeç­‰æ–¹æ³•</li>
<li>reducer<br>è®¡åˆ’å‡½æ•°ï¼Œæ¥æ”¶actionå’ŒnewStateï¼Œè¡¨ç¤ºå¯ä»¥æ€æ ·å¯¹çŠ¶æ€è¿›è¡Œä¿®æ”¹</li>
<li>action<br>actionæ˜¯ä¸€ä¸ªåŒ…å«typeå­—æ®µçš„å¯¹è±¡ã€‚</li>
<li>dispatch<br>æ¥æ”¶actionï¼Œé€šçŸ¥storeè¿›è¡ŒçŠ¶æ€ä¿®æ”¹ã€‚</li>
<li>subscribe<br>æ¯æ¬¡çŠ¶æ€æ”¹å˜æ‰§è¡Œå‚æ•°ä¸­çš„å›è°ƒã€‚</li>
<li>combineReducers<br>åˆå¹¶è®¡åˆ’å‡½æ•°ã€‚</li>
<li>middleWare<br>ä¸­é—´ä»¶ï¼Œå¯¹åŸdispatchçš„åŠŸèƒ½å¢å¼ºã€‚   </li>
</ol>
<p>é™„ï¼š</p>
<ol>
<li>reduxåŠŸèƒ½å›¾<br><img src="/2019/07/08/ä»é›¶å®ç°reduxåŸºæœ¬åŠŸèƒ½/reduxåŠŸèƒ½å›¾.png" alt="redux">   </li>
<li><a href="https://github.com/fallenleaves409/redux-demo" target="_blank" rel="noopener">ä»£ç åœ°å€</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://123fe.com/2019/06/21/æ·˜æ·˜ä¼˜æƒ å°åŠ©æ‰‹é¡¹ç›®æ€»ç»“/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sgdhfe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/logo.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sogou.dh.fe">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/21/æ·˜æ·˜ä¼˜æƒ å°åŠ©æ‰‹é¡¹ç›®æ€»ç»“/" itemprop="url">æ·˜æ·˜ä¼˜æƒ å°åŠ©æ‰‹é¡¹ç›®æ€»ç»“</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-06-21T11:57:44+08:00">
                2019-06-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/é¡¹ç›®æ€»ç»“/" itemprop="url" rel="index">
                    <span itemprop="name">é¡¹ç›®æ€»ç»“</span>
                  </a>
                </span>

                
                
              
            </span>
          
          <span> ï½œ </span><span class="fa fa-user-o"> </span><span style="color:#222;"> èƒ¡ä¸½å¨Ÿ</span>
          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h3><ul>
<li>canvasç”»è·¨åŸŸå›¾ç‰‡</li>
<li>canvasç»˜åˆ¶å›¾ç‰‡æ¨¡ç³Š</li>
<li>qrcodeåœ¨å®‰å“9.0ä¸‹ç”ŸæˆäºŒç»´ç çš„HTMLä¸å…¶ä»–è®¾å¤‡ä¸åŒ</li>
<li>IOSä¸Šé‡åˆ°çš„clickäº‹ä»¶bug;</li>
</ul>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2019/06/21/æ·˜æ·˜ä¼˜æƒ å°åŠ©æ‰‹é¡¹ç›®æ€»ç»“/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://123fe.com/2019/06/21/cypressä»£ç æµ‹è¯•ä»‹ç»/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sgdhfe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/logo.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sogou.dh.fe">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/21/cypressä»£ç æµ‹è¯•ä»‹ç»/" itemprop="url">Cypressä»£ç æµ‹è¯•ä»‹ç»</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-06-21T10:30:08+08:00">
                2019-06-21
              </time>
            

            

            
          </span>

          
          <span> ï½œ </span><span class="fa fa-user-o"> </span><span style="color:#222;"> </span>
          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><img src="/2019/06/21/cypressä»£ç æµ‹è¯•ä»‹ç»/cypress_title.png" alt="cypress_title.png"> </p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2019/06/21/cypressä»£ç æµ‹è¯•ä»‹ç»/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://123fe.com/2019/02/15/openCV-jsåŸºç¡€ä»‹ç»/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sgdhfe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/logo.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sogou.dh.fe">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/15/openCV-jsåŸºç¡€ä»‹ç»/" itemprop="url">openCV.jsåŸºç¡€ä»‹ç»</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-02-15T17:38:18+08:00">
                2019-02-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ç±»åº“/" itemprop="url" rel="index">
                    <span itemprop="name">ç±»åº“</span>
                  </a>
                </span>

                
                
              
            </span>
          
          <span> ï½œ </span><span class="fa fa-user-o"> </span><span style="color:#222;"> ç‰›çŠ‡</span>
          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><img src="/2019/02/15/openCV-jsåŸºç¡€ä»‹ç»/opencv_logo.png" alt="openCV_logo"> </p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2019/02/15/openCV-jsåŸºç¡€ä»‹ç»/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://123fe.com/2018/08/23/æ•™ç¨‹/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sgdhfe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/logo.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sogou.dh.fe">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/23/æ•™ç¨‹/" itemprop="url">å‘å¸ƒæ–‡ç« </a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-08-23T17:16:42+08:00">
                2018-08-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexo/" itemprop="url" rel="index">
                    <span itemprop="name">hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          
          <span> ï½œ </span><span class="fa fa-user-o"> </span><span style="color:#222;"> Carry</span>
          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><img src="/2018/08/23/æ•™ç¨‹/blog.jpg" alt="blog]"></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2018/08/23/æ•™ç¨‹/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://123fe.com/2017/11/23/å…³äºé—­åŒ…ä¹Ÿè®¸ä½ ä¸çŸ¥é“çš„äº‹/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sgdhfe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/logo.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sogou.dh.fe">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/23/å…³äºé—­åŒ…ä¹Ÿè®¸ä½ ä¸çŸ¥é“çš„äº‹/" itemprop="url">å…³äºé—­åŒ…ä¹Ÿè®¸ä½ ä¸çŸ¥é“çš„äº‹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-11-23T21:48:36+08:00">
                2017-11-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          
          <span> ï½œ </span><span class="fa fa-user-o"> </span><span style="color:#222;"> singsong</span>
          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><img src="/2017/11/23/å…³äºé—­åŒ…ä¹Ÿè®¸ä½ ä¸çŸ¥é“çš„äº‹/closure.png" alt="closure"><br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/11/23/å…³äºé—­åŒ…ä¹Ÿè®¸ä½ ä¸çŸ¥é“çš„äº‹/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://123fe.com/2017/11/23/requestAnimationFrame/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sgdhfe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/logo.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sogou.dh.fe">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/23/requestAnimationFrame/" itemprop="url">requestAnimationFrame</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-11-23T15:38:33+08:00">
                2017-11-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/åŠ¨ç”»/" itemprop="url" rel="index">
                    <span itemprop="name">åŠ¨ç”»</span>
                  </a>
                </span>

                
                
              
            </span>
          
          <span> ï½œ </span><span class="fa fa-user-o"> </span><span style="color:#222;"> singsong</span>
          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><img src="/2017/11/23/requestAnimationFrame/arf.png" alt="arf"></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/11/23/requestAnimationFrame/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://123fe.com/2017/11/21/æµè§ˆå™¨æ¸²æŸ“ç®€è¿°/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sgdhfe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/logo.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sogou.dh.fe">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/21/æµè§ˆå™¨æ¸²æŸ“ç®€è¿°/" itemprop="url">æµè§ˆå™¨æ¸²æŸ“ç®€è¿°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-11-21T16:05:04+08:00">
                2017-11-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/æµè§ˆå™¨/" itemprop="url" rel="index">
                    <span itemprop="name">æµè§ˆå™¨</span>
                  </a>
                </span>

                
                
              
            </span>
          
          <span> ï½œ </span><span class="fa fa-user-o"> </span><span style="color:#222;"> singsong</span>
          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>è¦ç¼–å†™é«˜æ€§èƒ½çš„ç½‘ç«™å’Œåº”ç”¨ï¼Œé™¤äº†ç¡®ä¿ç¼–å†™çš„ä»£ç èƒ½é«˜æ•ˆåœ°è¿è¡Œå¤–ï¼Œè¿˜éœ€è¦äº†è§£æµè§ˆå™¨æ˜¯å¦‚ä½•è¿›è¡Œæ¸²æŸ“å·¥ä½œçš„ã€‚</p>
<h2 id="æµè§ˆå™¨ä¸»è¦ç»„æˆç»“æ„"><a href="#æµè§ˆå™¨ä¸»è¦ç»„æˆç»“æ„" class="headerlink" title="æµè§ˆå™¨ä¸»è¦ç»„æˆç»“æ„"></a>æµè§ˆå™¨ä¸»è¦ç»„æˆç»“æ„</h2><p><img src="https://skmukhiya.files.wordpress.com/2013/06/fb76d-layers-pagespeed-ce-mfe5f8ctav.png" alt></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/11/21/æµè§ˆå™¨æ¸²æŸ“ç®€è¿°/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://123fe.com/2017/11/13/å†…å­˜æ³„éœ²ä¹‹jQuery-cache/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sgdhfe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/logo.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sogou.dh.fe">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/13/å†…å­˜æ³„éœ²ä¹‹jQuery-cache/" itemprop="url">å†…å­˜æ³„éœ²ä¹‹jQuery.cache</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-11-13T16:51:49+08:00">
                2017-11-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/memory/" itemprop="url" rel="index">
                    <span itemprop="name">memory</span>
                  </a>
                </span>

                
                
              
            </span>
          
          <span> ï½œ </span><span class="fa fa-user-o"> </span><span style="color:#222;"> singsong</span>
          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><img src="/2017/11/13/å†…å­˜æ³„éœ²ä¹‹jQuery-cache/jquery.jpg" alt="jquery.jpg"><br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/11/13/å†…å­˜æ³„éœ²ä¹‹jQuery-cache/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://123fe.com/2017/11/10/IE-8å¾ªç¯å¼•ç”¨å¯¼è‡´çš„å†…å­˜æ³„éœ²/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sgdhfe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/logo.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sogou.dh.fe">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/10/IE-8å¾ªç¯å¼•ç”¨å¯¼è‡´çš„å†…å­˜æ³„éœ²/" itemprop="url">IE<8å¾ªç¯å¼•ç”¨å¯¼è‡´çš„å†…å­˜æ³„éœ²< a></8å¾ªç¯å¼•ç”¨å¯¼è‡´çš„å†…å­˜æ³„éœ²<></a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-11-10T18:05:58+08:00">
                2017-11-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/memory/" itemprop="url" rel="index">
                    <span itemprop="name">memory</span>
                  </a>
                </span>

                
                
              
            </span>
          
          <span> ï½œ </span><span class="fa fa-user-o"> </span><span style="color:#222;"> singsong</span>
          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><img src="/2017/11/10/IE-8å¾ªç¯å¼•ç”¨å¯¼è‡´çš„å†…å­˜æ³„éœ²/leakage.png" alt="leakage"></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/11/10/IE-8å¾ªç¯å¼•ç”¨å¯¼è‡´çš„å†…å­˜æ³„éœ²/#more" rel="contents">
              é˜…è¯»å…¨æ–‡ &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/logo.png" alt="sgdhfe">
            
              <p class="site-author-name" itemprop="name">sgdhfe</p>
              <p class="site-description motion-element" itemprop="description">ğŸ³ğŸ³ æœç‹—å¯¼èˆªå‰ç«¯å¼€å‘ç»„ ğŸ¬ğŸ¬</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/sgdh-fe" target="_blank" title="github">
                      
                        <i class="fa fa-fw fa-github"></i>github</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://123.sogou.com/" title="123sogou" target="_blank">123sogou</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">sgdhfe</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
